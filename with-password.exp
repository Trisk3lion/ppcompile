#!/usr/bin/expect

#exp_internal 1  # debug

set passwd [lindex $argv 0]
set cmd [lrange $argv 1 end]

#set passwd $::env(PPCOMPILE_PASSWORD)
#set cmd [lrange $argv 0 end]

# expand list
spawn {*}$cmd

expect "password: "
send "${passwd}\r"

# interact

# to catch exit code
expect eof
catch wait result
exit [lindex $result 3]
